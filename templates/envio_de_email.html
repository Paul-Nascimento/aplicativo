{% extends 'base.html' %}

{% block content %}





{% for msg in get_flashed_messages() %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
{{ msg }}
</div>
{% endfor %}

<br/>
<div>
    <h1>Conferir empresas</h1>
</div>
<br/>

<div>
    <form method="POST">

        {{ form.hidden_tag() }}

        {{ form.empresas.label(class="form-label") }}
        {{ form.empresas(class="form-control") }}

        {{ form.responsavel_envio_email.label(class="form-label") }}
        {{ form.responsavel_envio_email(class="form-control") }}



        <br/>
        {{ form.envio_de_email(class="btn btn-primary") }}
        {{ form.excluir_envio_de_email(class="btn btn-danger") }}



    </form>
</div>
<br/>
<div>
    <table class="table table-hover">
        <form method="post">
            <thead>
                <tr>
                    <th> {{ filtro.id.label }}</th>
                    <th>{{ filtro.nome.label}}</th>
                    <th> {{ filtro.grupo.label}}</th>

                    <th>{{ filtro.macro.label}}</th>
                    <th>{{  filtro.regime.label }}</th>
                    <th>{{  filtro.conferencia.label}}</th>

                    <th>{{  filtro.envio_de_email.label}}</th>
                    <th>{{  filtro.data_envio_de_email.label }}</th>
                    <th>{{  filtro.responsavel_envio_email.label }}</th>

                    <th>{{ filtro.filtrar }}</th>
                </tr>
            <tr>
                    <th> {{ filtro.id(class="form-control") }}</th>
                    <th>{{  filtro.nome(class="form-control")}}</th>
                    <th> {{ filtro.grupo(class="form-control")}}</th>

                    <th>{{  filtro.macro(class="form-control")}}</th>
                    <th>{{  filtro.regime(class="form-control") }}</th>
                    <th>{{  filtro.conferencia(class="form-control")}}</th>

                    <th>{{  filtro.envio_de_email(class="form-control")}}</th>
                    <th>{{  filtro.data_envio_de_email(class="form-control") }}</th>
                    <th>{{  filtro.responsavel_envio_email(class="form-control") }}</th>

                </tr>
            </thead>
        </form>

        {% for dado in dados %}
                <tr>
                    <td>{{ dado.id }}</td>
                    <td>{{ dado.nome }}</td>
                    <td>{{ dado.grupo }}</td>
                    <td>{{ dado.macro }}</td>
                    <td>{{ dado.regime }}</td>
                    {% if dado.conferencia == True %}
                            <td>Sim</td>
                        {% else %}
                            <td>Não</td>
                    {% endif %}

                    {% if dado.envio_de_email == True %}

                        <td>Sim</td>
                        <td>{{ dado.data_envio_email|string()}}</td>
                        <td>{{ dado.responsavel_envio_email }}</td>

                    {% else %}
                        <td>Não</td>
                        <td></td>
                        <td></td>
                    {% endif %}


                </tr>
            {% endfor %}


    </table>
</div>



{% endblock %}